require("../../common/manifest.js")
require("../../common/vendor.js")
global.webpackJsonpMpvue([3],{PuOb:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("5nAL"),o=e.n(i),n=e("pKwG");new o.a(n.a).$mount()},fGmC:function(t,s,e){"use strict";var i={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("view",[t.isEmpty?e("view",{staticClass:"empty-car"},[e("image",{attrs:{src:"/static/img/kong.png"}}),t._v(" "),e("text",{staticClass:"empty-car-tips"},[t._v("购物车还是空的")]),t._v(" "),e("text",{staticClass:"empty-car-tips extra"},[t._v("快去逛逛吧~")])]):e("view",[t._m(0),t._v(" "),t._l(t.goodsList,function(s,i){return e("block",{key:s.goods_id},[e("view",{staticClass:"goods-item"},[e("view",{class:["pubIcon",s.isSel?"trueIcon":"falseIcon"],attrs:{eventid:"0_"+i},on:{click:function(e){t.selIcon(s)}}}),t._v(" "),e("view",{staticClass:"goods-item-pic"},[e("image",{attrs:{src:s.goods_small_logo}})]),t._v(" "),e("view",{staticClass:"goods-item-info"},[e("text",{staticClass:"goods-item-info-title"},[t._v(t._s(s.goods_name))]),t._v(" "),e("text",{staticClass:"goods-item-info-price"},[t._v("￥"+t._s(s.goods_price))]),t._v(" "),e("view",{staticClass:"goods-item-info-edit"},[e("view",{staticClass:"outer"},[e("view",{style:{color:s.goods_number<=1?"#999":"black"},attrs:{eventid:"1_"+i},on:{click:function(e){t.substrict(s)}}},[t._v("-")]),t._v(" "),e("view",{staticClass:"value"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.goods_number,expression:"item.goods_number"}],attrs:{type:"number",eventid:"2_"+i},domProps:{value:s.goods_number},on:{input:function(t){t.target.composing||(s.goods_number=t.target.value)}}})]),t._v(" "),e("view",{staticClass:"add",attrs:{eventid:"3_"+i},on:{click:function(e){t.add(s)}}},[t._v("+")])]),t._v(" "),e("text",{attrs:{eventid:"4_"+i},on:{click:function(e){t.deleteGoods(s.goods_id)}}},[t._v("| 删除")])])])])])})],2),t._v(" "),t.isEmpty?t._e():e("view",{staticClass:"fixed-bar"},[e("view",{staticClass:"allselect",attrs:{eventid:"5"},on:{tap:t.toggleAllSelect}},[e("view",{class:["pubIcon",t.isAllSel?"trueIcon":"falseIcon"]}),t._v(" "),e("text",{staticStyle:{"margin-left":"10rpx"}},[t._v("全选")])]),t._v(" "),e("view",{staticClass:"statistics"},[e("view",[e("text",[t._v("合计：")]),t._v(" "),e("text",{staticStyle:{color:"#ff2d4a","font-size":"30rpx"}},[t._v("￥"+t._s(t.getTotalPrice))])]),t._v(" "),e("text",[t._v("包含运费")])]),t._v(" "),e("view",{class:["jiesuan",t.getTotalCount>0?"":"disabled"],attrs:{eventid:"6"},on:{click:t.goToDeal}},[e("text",[t._v("去结算 ("+t._s(t.getTotalCount)+")")])])])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("view",{staticClass:"shop-head"},[s("view",{staticClass:"shop-head-info"},[s("view",{staticClass:"iconfont icon-shop flex-center icon-dianpu"}),this._v(" "),s("text",{staticClass:"shop-name"},[this._v("品优购生活馆")])])])}]};s.a=i},mKBK:function(t,s,e){"use strict";var i=e("Xxa5"),o=e.n(i),n=e("exGp"),a=e.n(n),c=e("iTgA");s.a={data:function(){return{goodsList:[],isEmpty:!0,isAllSel:!0}},onShow:function(){this.getCarList()},onLoad:function(){},computed:{getTotalPrice:function(){var t=0;return this.goodsList.forEach(function(s){s.isSel&&(t+=s.goods_number*s.goods_price)}),t},getTotalCount:function(){var t=0;return this.goodsList.forEach(function(s){s.isSel&&(t+=s.goods_number)}),t}},methods:{getCarList:function(){var t=this;return a()(o.a.mark(function s(){var e,i,n,a;return o.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:for(n in e=Object(c.c)(),i=[],e)i.push(n);if(0!=i.length){s.next=7;break}return s.abrupt("return");case 7:t.isEmpty=!1;case 8:return s.next=10,t.$axios.get("api/public/v1/goods/goodslist?goods_ids="+i.join(","));case 10:(a=s.sent).data.message.forEach(function(t){t.goods_number=e[t.goods_id],t.isSel=!0}),t.goodsList=a.data.message;case 13:case"end":return s.stop()}},s,t)}))()},selIcon:function(t){t.isSel=!t.isSel;var s=!0;this.goodsList.some(function(t){if(!t.isSel)return s=!1,!0}),this.isAllSel=s},toggleAllSelect:function(){var t=this;this.isAllSel=!this.isAllSel,this.goodsList.forEach(function(s){return s.isSel=t.isAllSel})},add:function(t){t.goods_number++,Object(c.d)(t)},substrict:function(t){1!=t.goods_number&&(t.goods_number--,Object(c.d)(t))},deleteGoods:function(t){var s=this;wx.showModal({title:"提示",content:"是否删除该商品?",success:function(e){if(e.confirm){Object(c.b)(t);var i=s.goodsList.findIndex(function(s){return s.goods_id==t});s.goodsList.splice(i,1),s.isEmpty=0==s.goodsList.length}else e.cancel}})},goToDeal:function(){var t=[];console.log(this.goodsList),this.goodsList.forEach(function(s){s.isSel&&t.push(s.goods_id)}),console.log(t),0!=t.length?wx.navigateTo({url:"/pages/pay/main?ids="+t.join(",")}):wx.showToast({title:"请选择商品结算",icon:"none",duration:2e3})}}}},pKwG:function(t,s,e){"use strict";var i=e("mKBK"),o=e("fGmC");var n=function(t){e("q6la")},a=e("ybqe")(i.a,o.a,n,"data-v-9b214e0e",null);s.a=a.exports},q6la:function(t,s){}},["PuOb"]);