require("../../common/manifest.js")
require("../../common/vendor.js")
global.webpackJsonpMpvue([5],{"28Pj":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("5nAL"),s=a.n(r),n=a("OXuE");new s.a(n.a).$mount()},ASi7:function(t,e){},OXuE:function(t,e,a){"use strict";var r=a("mrkC"),s=a("qTy9");var n=function(t){a("ASi7")},i=a("ybqe")(r.a,s.a,n,"data-v-26668c08",null);e.a=i.exports},mrkC:function(t,e,a){"use strict";var r=a("Xxa5"),s=a.n(r),n=a("exGp"),i=a.n(n);e.a={data:function(){return{menu:["全部","代付款","待收货","退货/退款"],currentIndex:0,orderList:[]}},onLoad:function(t){this.getOrderList(t.type)},methods:{totalSel:function(t){console.log(t),this.currentIndex=t,this.getOrderList(t+1)},getOrderList:function(t){var e=this;return i()(s.a.mark(function a(){var r;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$axios.get("api/public/v1/my/orders/all?type="+t);case 2:r=a.sent,console.log(r),e.orderList=r.data.message.orders;case 5:case"end":return a.stop()}},a,e)}))()},goToPay:function(t){var e=this;return i()(s.a.mark(function a(){var r;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$axios.post("my/orders/req_unifiedorder",{order_number:t});case 2:r=a.sent,wx.requestPayment({timeStamp:r.data.message.pay.timeStamp,nonceStr:r.data.message.pay.nonceStr,package:r.data.message.pay.package,signType:r.data.message.pay.signType,paySign:r.data.message.pay.paySign,success:function(){var a=i()(s.a.mark(function a(r){return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$axios.post("my/orders/chkOrder",{order_number:t});case 2:200===a.sent.data.meta.status&&e.getOrderListData(e.currentIndex+1);case 4:case"end":return a.stop()}},a,e)}));return function(t){return a.apply(this,arguments)}}(),fail:function(t){"requestPayment:fail cancel"===t.errMsg&&wx.showToast({title:"您取消了付款",image:"/static/img/error2.png",duration:2e3,mask:!0,success:function(t){setTimeout(function(){e.getOrderListData(e.currentIndex+1)},2e3)}})}});case 4:case"end":return a.stop()}},a,e)}))()}}}},qTy9:function(t,e,a){"use strict";var r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",[a("view",{staticClass:"tabs"},t._l(t.menu,function(e,r){return a("view",{key:r,class:["tab-item",r==t.currentIndex?"active":""],attrs:{eventid:"0_"+r},on:{click:function(e){t.totalSel(r)}}},[a("text",[t._v(t._s(e))])])})),t._v(" "),a("view",{staticClass:"order"},[t._l(t.orderList,function(e,r){return a("block",{key:e.order_id},[a("view",{staticClass:"order-item"},[t._l(e.goods,function(e,r){return a("block",{key:r},[a("view",{staticClass:"product-item"},[a("navigator",{staticClass:"product-left",attrs:{url:"/pages/goods_detail/main?goods_id="+e.goods_id}},[a("image",{staticClass:"product-img holder-image",attrs:{src:e.goods_small_logo}})]),t._v(" "),a("view",{staticClass:"product-right"},[a("navigator",{staticClass:"product-name",attrs:{url:"/pages/goods_detail/main?goods_id="+e.goods_id}},[t._v("\n                                "+t._s(e.goods_name)+"\n                            ")]),t._v(" "),a("view",{staticClass:"product-price"},[a("text",{staticClass:"product-price-symbol"},[t._v("￥")]),t._v(" "),a("text",{staticClass:"product-price-integer"},[t._v(t._s(e.goods_price))]),t._v(" "),a("text",{staticClass:"product-price-decimal"},[t._v(".00")])]),t._v(" "),a("view",{staticClass:"product-count"},[t._v("x"+t._s(e.goods_number))])],1)],1)])}),t._v(" "),a("view",{staticClass:"order-total"},[t._v("\n                    共"+t._s(e.total_count)+"件商品 总计：¥"+t._s(e.total_price)+" (含运费0.00)\n                ")]),t._v(" "),a("view",{staticClass:"order-item-pay"},[a("view",[t._v("订单号:"+t._s(e.order_number))]),t._v(" "),"0"===e.pay_status?a("view",{staticClass:"btn-line btn-color-main",attrs:{eventid:"1_"+r},on:{tap:function(a){t.goToPay(e.order_number)}}},[t._v("支付")]):t._e()])],2)])}),t._v(" "),0===t.orderList.length?a("view",{staticClass:"no_order"},[t._m(0),t._v(" "),a("text",[t._v("没有订单啦...")])]):t._e()],2)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("view",[e("img",{attrs:{src:"/static/img/empty_data.png",alt:""}})])}]};e.a=r}},["28Pj"]);